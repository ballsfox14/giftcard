<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="image/pastel.ico" type="image/x-icon">
    <title>Feliz Cumpleaños | Para mi niña</title>
    <link rel="stylesheet" href="styles/style.css" />

    <style>
        body {
            overflow: hidden;
            margin: 0;
        }

        svg {
            position: fixed;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="envelope-wrapper">
            <div class="envelope">
                <div class="letter">
                    <div class="text">
                        <strong>♥ Para mi niña ♥</strong>
                        <p>
                            ¡Feliz cumpleaños a la niña más increíble del mundo!
                            ¡Feliz cumpleaños a la niña más genial del planeta!
                            Que este día esté lleno de alegría, risas y mucha diversión.
                        </p>
                    </div>
                </div>
            </div>
            <div class="heart"></div>
        </div>
    </div>

    <svg id="hearts" viewBox="-600 -400 1200 800" preserveAspectRatio="xMidYMid slice">
        <defs>
            <symbol id="heart" viewBox="-69 -16 138 138">
                <path d="M0,12
                   C 50,-30 110,50  0,120
                   C-110,50 -50,-30 0,12z" />
            </symbol>
        </defs>
    </svg>


    <script>
        const envelope = document.querySelector(".envelope-wrapper");
        envelope.addEventListener("click", () => {
            envelope.classList.toggle("flap");
        });
    </script>

    <script>
        const colors = [
            "#e03776",
            "#8f3e98",
            "#4687bf",
            "#3bab6f",
            "#f9c25e",
            "#f47274",
        ];
        const SVG_NS = "http://www.w3.org/2000/svg";
        const SVG_XLINK = "http://www.w3.org/1999/xlink";

        let heartsRy = [];

        function useTheHeart(n) {
            let use = document.createElementNS(SVG_NS, "use");
            use.n = n;
            use.setAttributeNS(SVG_XLINK, "xlink:href", "#heart");
            use.setAttributeNS(null, "transform", `scale(${use.n})`);
            use.setAttributeNS(null, "fill", colors[n % colors.length]);
            use.setAttributeNS(null, "x", -69);
            use.setAttributeNS(null, "y", -69);
            use.setAttributeNS(null, "width", 138);
            use.setAttributeNS(null, "height", 138);

            heartsRy.push(use);
            hearts.appendChild(use);
        }

        for (let n = 18; n >= 0; n--) {
            useTheHeart(n);
        }

        function Frame() {
            window.requestAnimationFrame(Frame);
            for (let i = 0; i < heartsRy.length; i++) {
                if (heartsRy[i].n < 18) {
                    heartsRy[i].n += 0.01;
                } else {
                    heartsRy[i].n = 0;
                    hearts.appendChild(heartsRy[i]);
                }
                heartsRy[i].setAttributeNS(
                    null,
                    "transform",
                    `scale(${heartsRy[i].n})`
                );
            }
        }

        Frame();
    </script>
</body>

</html>